# Брокер сообщений RabbitMQ

![RabbitMQ_logo.svg.png](photo%2FRabbitMQ_logo.svg.png)

## Введение

### Проблема #1

**Когда наш сервис начинает пользоваться невероятной популярностью, то количество запросов к нему от пользователей
вырастет и наш сервис начнёт прилегать под нагрузкой.**

_Что будем делать?_

+ Отмасштабируем количество инстансов offer-service
+ Подключим кэш

![Blank diagram.png](photo%2FBlank%20diagram.png)

Время обработки запроса будет включать в себя время, за которое база ответит нам, что всё OK.

_Что будет:_

+ База, скорее всего, приляжет
+ Данные будут неконсистентными

### Проблема #2

**Наш сервис растёт и развивается и вот уже offer-service при наступлении какого-то события должен отправлять данные
в другие сервисы, чтобы что-то там инициировать.**

![Blank diagram (1).png](photo%2FBlank%20diagram%20%281%29.png)

_Что в итоге получаем:_

+ Под каждый сервис нужно писать свой собственный клиент и обрабатывать ответы от него
+ Каждый внешний сервис будет отвечать со своей собственной задержкой, по итогу наш ответ клиенту будет включать
  в себя все эти ожидания (при асинхронных запросах - ориентируемся на самый долгий ответ от внешнего сервиса)
+ Как следствие, отвечаем пользователю медленно
+ Если мы начинаем очень часто ходить во внешние сервисы, то они могут лечь под нагрузкой